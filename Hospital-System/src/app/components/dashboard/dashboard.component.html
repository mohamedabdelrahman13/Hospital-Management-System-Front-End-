<section>
    <div class="my-2">
        <label for="viewSelect">View by :</label>
        <select id="viewSelect" class="form-select" [(ngModel)]="selectedView" (change)="updateStats(selectedView)">
          <option value="daily">Daily</option>
          <option value="monthly">Monthly</option>
        </select>
    </div> 
</section>
<section class="p-2">
    <div class="row stats">
        <div class="stats-container col-3">
            <div class="stats-card d-flex justify-content-around align-items-center">
                <div class="icon icon-patients">
                    <mat-icon>sick</mat-icon>
                </div>
                <div class="title">
                    <h3>{{totalPatients}}</h3>
                    <p style="color: gray;">Total patients</p>
                </div>
            </div>
        </div>
        <div class="stats-container col-3">
            <div class="stats-card d-flex justify-content-around align-items-center">
                <div class="icon icon-staff">
                    <mat-icon>groups</mat-icon>
                </div>
                <div class="title">
                    <h3>{{totalStaff}}</h3>
                    <p style="color: gray;">Available staff</p>
                </div>
            </div>
        </div>
        <div class="stats-container col-3">
            <div class="stats-card d-flex justify-content-around align-items-center">
                <div class="icon icon-costs">
                    <mat-icon>receipt_long</mat-icon>
                </div>
                <div class="title">
                    <h3>{{averageCost}}EGP</h3>
                    <p style="color: gray;">Avg. Treatment Costs</p>
                </div>
            </div>
        </div>
        <div class="stats-container col-3">
            <div class="stats-card d-flex justify-content-around align-items-center">
                <div class="icon icon-revenue">
                    <mat-icon>attach_money</mat-icon>
                </div>
                <div class="title">
                    <h3>{{totalRevenue | currency : 'EGP'}} </h3>
                    <p style="color: gray;">Total revenue</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row Chart-container">
        <div class="col-8">
            <div class="chart-card">
                <h3 *ngIf="selectedView == 'monthly' "> Monthly patient registeration trends</h3>
                <h3 *ngIf="selectedView == 'daily' ">Daily patient registeration trends</h3>
                <canvas baseChart [data]="patientsTrendchart" [options]="patientsTrendChartOptions" [type]="'bar'">
                </canvas>
            </div>
        </div>
        <div class=" col-4">
            <div class="chart-card border-2">
                <h3>Patients by Division</h3>
                <canvas baseChart [data]="deptStatsChartData" [options]="deptStatsChartOptions" [type]="'pie'">
                </canvas>
            </div>
        </div>
    </div>
    <div class="row Chart-container">
        <div class="col-6">
            <div class="chart-card ">
                <h3 *ngIf="selectedView == 'monthly'">Appointments per Month</h3>
                <h3 *ngIf="selectedView == 'daily'">Appointments per day</h3>
                <canvas baseChart [data]="appStatsChart" [options]="appStatsChartOptions" [type]="'line'">
                </canvas>
            </div>
        </div>
        <div class="col-6">
            <div class="chart-card">
                <h3>Monthly Appointment Revenue</h3>
                <span style="font-weight: bold; color: rgb(136, 136, 136); font-style: italic;">Total Revenue : {{totalRevenue | currency: 'EGP'}}</span>
            <canvas baseChart [data]="RevenueChartData" [options]="RevenueChartOptions"
                    [type]="'line'">
                </canvas>
            </div>
        </div>
    </div>
</section>